<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Formulaire Nutritionniste</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: url("background.png") no-repeat center center fixed;
      background-size: cover;
      color: #fff;
    }

    .form-container {
      max-width: 600px;
      margin: 5vh auto;
      background: rgba(0, 0, 0, 0.7);
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      width: 90%;
    }

    h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
    }

    .lang-switch {
      text-align: right;
      margin-bottom: 1rem;
    }

    label {
      display: block;
      margin-bottom: 0.3rem;
      font-weight: bold;
    }

    input, textarea, select {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1rem;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
    }

    button {
      width: 100%;
      background: #28a745;
      color: white;
      border: none;
      padding: 0.8rem;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background: #218838;
    }

    #thankYou {
      text-align: center;
      margin-top: 1rem;
      font-size: 1rem;
    }

    @media (max-width: 480px) {
      .form-container {
        padding: 1rem;
      }

      h2 {
        font-size: 1.5rem;
      }

      input, textarea, select, button {
        font-size: 0.95rem;
      }

      .lang-switch {
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="form-container">
    <h2 id="form-title">Formulaire Patient</h2>
    <div class="lang-switch">
      <label for="language">üåê</label>
      <select id="language">
        <option value="fr">Fran√ßais</option>
        <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
        <option value="en">English</option>
      </select>
    </div>
    <form id="patientForm">
      <label id="lblName" for="name"></label>
      <input type="text" id="name" name="name" required />

      <label id="lblEmail" for="email"></label>
      <input type="email" id="email" name="email" required />

      <label id="lblPhone" for="phone"></label>
      <input type="tel" id="phone" name="phone" />

      <label id="lblDob" for="dob"></label>
      <input type="date" id="dob" name="dob" />

      <label id="lblGender" for="gender"></label>
      <select id="gender" name="gender">
        <option value="male" id="optMale">Homme</option>
        <option value="female" id="optFemale">Femme</option>
        <option value="other" id="optOther">Autre</option>
      </select>

      <label id="lblHeight" for="height"></label>
      <input type="number" id="height" name="height" />

      <label id="lblWeight" for="weight"></label>
      <input type="number" id="weight" name="weight" />

      <label id="lblDiet" for="diet"></label>
      <textarea id="diet" name="diet" rows="3"></textarea>

      <label id="lblGoals" for="goals"></label>
      <textarea id="goals" name="goals" rows="3"></textarea>

      <label id="lblMeds" for="meds"></label>
      <textarea id="meds" name="meds" rows="3"></textarea>

      <button type="submit" id="btnSubmit">Soumettre</button>
    </form>
    <p id="thankYou" style="color: lightgreen; display: none;"></p>
  </div>

  <script>
    const dictionary = {
      fr: {
        title: "Formulaire Patient",
        name: "Nom complet",
        email: "Adresse email",
        phone: "Num√©ro de t√©l√©phone",
        dob: "Date de naissance",
        gender: "Genre",
        male: "Homme",
        female: "Femme",
        other: "Autre",
        height: "Taille (cm)",
        weight: "Poids (kg)",
        diet: "Restrictions alimentaires",
        goals: "Objectifs de sant√©",
        meds: "M√©dicaments actuels",
        submit: "Soumettre",
        thankYou: "Merci ! Votre formulaire a √©t√© envoy√©."
      },
      ar: {
        title: "ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑŸÖÿ±Ÿäÿ∂",
        name: "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",
        email: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
        phone: "ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ",
        dob: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÖŸäŸÑÿßÿØ",
        gender: "ÿßŸÑÿ¨ŸÜÿ≥",
        male: "ÿ∞ŸÉÿ±",
        female: "ÿ£ŸÜÿ´Ÿâ",
        other: "ÿ¢ÿÆÿ±",
        height: "ÿßŸÑÿ∑ŸàŸÑ (ÿ≥ŸÖ)",
        weight: "ÿßŸÑŸàÿ≤ŸÜ (ŸÉÿ∫)",
        diet: "ÿßŸÑŸÇŸäŸàÿØ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ©",
        goals: "ÿßŸÑÿ£ŸáÿØÿßŸÅ ÿßŸÑÿµÿ≠Ÿäÿ©",
        meds: "ÿßŸÑÿ£ÿØŸàŸäÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©",
        submit: "ÿ•ÿ±ÿ≥ÿßŸÑ",
        thankYou: "ÿ¥ŸÉÿ±Ÿãÿß! ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿ®ŸÜÿ¨ÿßÿ≠."
      },
      en: {
        title: "Patient Intake Form",
        name: "Full Name",
        email: "Email Address",
        phone: "Phone Number",
        dob: "Date of Birth",
        gender: "Gender",
        male: "Male",
        female: "Female",
        other: "Other",
        height: "Height (cm)",
        weight: "Weight (kg)",
        diet: "Dietary Restrictions",
        goals: "Health Goals",
        meds: "Current Medications",
        submit: "Submit",
        thankYou: "Thank you! Your form has been submitted."
      }
    };

    function updateLanguage(lang) {
      const d = dictionary[lang];
      document.documentElement.lang = lang;
      document.body.style.direction = lang === "ar" ? "rtl" : "ltr";
      document.getElementById("form-title").innerText = d.title;
      document.getElementById("lblName").innerText = d.name;
      document.getElementById("lblEmail").innerText = d.email;
      document.getElementById("lblPhone").innerText = d.phone;
      document.getElementById("lblDob").innerText = d.dob;
      document.getElementById("lblGender").innerText = d.gender;
      document.getElementById("optMale").innerText = d.male;
      document.getElementById("optFemale").innerText = d.female;
      document.getElementById("optOther").innerText = d.other;
      document.getElementById("lblHeight").innerText = d.height;
      document.getElementById("lblWeight").innerText = d.weight;
      document.getElementById("lblDiet").innerText = d.diet;
      document.getElementById("lblGoals").innerText = d.goals;
      document.getElementById("lblMeds").innerText = d.meds;
      document.getElementById("btnSubmit").innerText = d.submit;
      document.getElementById("thankYou").innerText = d.thankYou;
    }

    document.getElementById("language").addEventListener("change", (e) => {
      updateLanguage(e.target.value);
    });

    document.getElementById("patientForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const form = e.target;
      const data = new URLSearchParams();

      data.append("name", form.name.value);
      data.append("email", form.email.value);
      data.append("phone", form.phone.value);
      data.append("dob", form.dob.value);
      data.append("gender", form.gender.value);
      data.append("height", form.height.value);
      data.append("weight", form.weight.value);
      data.append("diet", form.diet.value);
      data.append("goals", form.goals.value);
      data.append("meds", form.meds.value);

      fetch("https://script.google.com/macros/s/AKfycbwfBNj0TlU81Xy01_pFWlnBkzb6MvdGIwygjRVyvFqeT6WqPvC6ZkRwM0uTO8DlCMxxWQ/exec", {
        method: "POST",
        body: data
      })
      .then(res => res.text())
      .then((text) => {
        document.getElementById("thankYou").style.display = "block";
        document.getElementById("patientForm").reset();
      })
      .catch((err) => {
        alert("Submission failed.");
        console.error(err);
      });
    });

    updateLanguage("fr");
  </script>
</body>
</html>
